<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Rantec | Local </title>
  
    <!-- Favicon icon -->
    <link rel="shortcut icon" type="image/jpg" href="images/favicon/dashboard-icon.png">

    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@500&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Font awesome link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <!-- Custom stylesheet -->
    <link rel="stylesheet" href="styles/angus.css" />
  <!-- Jquery link  -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

    <!-- QRCode.js library hosted on cdnjs CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    

</head>
<body>
  <section id="menu">
    <div class="logo">
      <img src="images/Screenshot_20230711-181851 (2).png" alt="">
      <h2>Hi  Ahmad</h2><br />
    </div>
  
    <!-- menu items -->
    <div class="menu-items">
       <div class="items"><a href="farmerhome.html"><i class="fa-solid fa-house"></i>Home</a></div>
       <div class="items"><a class="sub-btn"><i class="fa-solid fa-user-doctor"></i>Livestock
        <!-- dropdown menu --> 
        <!-- dropdown arrow -->
         <i class="fas fa-angle-right dropdown"></i>
        </a>
    
        <div class="sub-menu">
          <a href="livestock-1.html" class="sub-items"><i class="fas fa-horse"></i>Large Ruminant</a>
          <a href="#" class="sub-items"><i class="fa-solid fa-hippo"></i>Small Ruminant</a>
        </div>
        </div>
         <div class="items"><a href="upcoming.html"><i class="fa-solid fa-cart-shopping"></i>Booking</a></div>
      </div>
  </section>
    <section id="interface">
      <div class="navigation">
        <div class="n1">
          <div>
            <i  id="menu-btn" class="fa-solid fa-bars"></i>
          </div>
          <div class="search">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="text" placeholder="search">
          </div>
        </div>
        <div class="profile">
          <i class="fa-regular fa-bell"></i>
          <button class="profile-btn">
            <!-- <i class="fa-regular fa-bell"></i> -->
            <img src="images/Screenshot_20230711-181851 (2).png" alt="">
          </button>
          
          <div class="dropdown-content">
            <div class="profile-info">
              <h5 class="full-name">Ahmad Sinan</h5>
              <p class="email">ahmad@gmail.com</p>
            </div>
            <a href="#" class="edit-picture">Change Picture</a>
            <a href="#" class="password">Password</a>
            <a href="index.html"><i class="fa-solid fa-sign-out"></i>Logout</a>
            <div class="sparkles">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
        
        
      </div>
      <!-- row markup starts here -->
      <div class="row">
        <div class="left-align">
         <a href="livestock-1.html"><i class="fa-solid fa-arrow-left"></i> </a>
        </div>
        <div class="center-align">
         <h4> EXOTIC </h4> 
        </div>
        <div class="right-align">
          <!-- <div class="dot"></div> -->
          <!-- <span class="number">7</span> -->
          <button class="top-add" id="addButton">+Add</button>
        </div>

        <div id="qrCodeModal" class="modal qrCodeImageContainer">
          <div class="modal-content qrCodeImage qrCodeImageContainer">
            <span class="close">&times;</span>
            <img id="qrCodeImage" src="images/qr-code.png" alt="QR Code" class="qrCodeImageContainer">
          </div>
        </div>
       
    <div class="form-popup" id="number-form">
    <form>
      <label for="sex-input">Sex:</label>
      <input type="text" id="sex-input" placeholder="Enter sex" required>
      
      <label for="id-input" id="addButtong">ID:</label>
      <input type="text" id="id-input" placeholder="Enter ID" required>
      
      <div class="form-buttons">
        <button type="submit" id="submit-btn">Submit</button>
        <button type="button" id="close-btn">Close</button>
      </div>
    </form>
  </div>

     <!-- Form container with hidden form content -->
     <div class="form-container" id="formContainer">
      <div class="form-content">
        <span class="close">&times;</span>
        <form id="livestock-form">
          <label for="name">Name:</label>
          <input type="text" id="name" name="name"  placeholder=""required>
    
          <label for="breed">Breed:</label>
          <input type="text" id="breed" name="breed"  placeholder=""required>
  
          <label for="age">Age:</label>
          <input type="text" id="age" name="age" required>
    
          <label for="weight">Weight:</label>
          <input type="text" id="weight" name="weight" placeholder="" required>
    
          <label for="sex">Sex:</label>
          <input type="text" id="sex" name="sex" placeholder="" required>
    
          <!-- <label for="vaccine">ID:</label>
          <input type="text" id="vaccine" name="vaccine"  placeholder=""required> -->
    
          <button type="submit" id="submit-button" >Submit</button>
        </form>
  
      </div>
    </div>
  <!-- row markup ends here -->
      </div>
      <div class="values"></div>
  
      <!-- Board markup starts here -->
    <div class="table-container">
      <table width="100%">
        <thead>
          <tr>
            <td>Name</td>
            <td>Breed</td>
            <td>Sex</td>
            <td>Health Status</td>
            <td>VIEW</td>
            <td>QR CODE</td>
          </tr>
        </thead>
        <tbody  id="livestock-table-body">
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Cattle</h5>
              </div>
            </td>
  
            <td class="people-des">
              <h5>White Fulani</h5>
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
            </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Goat</h5>
              </div>
            </td>
  
            <td class="people-des">
              <h5>Sokoto Gudali</h5> 
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Unhealthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Sheep</h5>
              </div>
            </td>
  
            <td class="people-des">
               <h5>Red Bororo</h5> 
            </td>
            <td class="active"><p>F</p></td>
  
            <td class="ro le">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Goat</h5>
              </div>
            </td>
  
            <td class="people-des">
              <h5>Muturu</h5> 
            </td>
            <td class="active"><p>F</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Cattle</h5>
              </div>
            </td>
  
            <td class="people-des">
            <h5>Adamawa Gudali</h5>
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Unhealthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
              </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Sheep</h5>
              </div>
            </td>
  
            <td class="people-des">
               <h5>Sokoto Gudali</h5> 
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton" data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
          <tr>
            <td class="people">
              <div class="people-des">
                <h5>Cattle</h5>
              </div>
            </td>
  
            <td class="people-des">
               <h5>White Fulani</h5> 
            </td>
            <td class="active"><p>F</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
            <td class="people">
              <div class="people-des">
                <h5>Pig</h5>
              </div>
            </td>
  
            <td class="people-des">
             <h5>Muturu</h5> 
            </td>
            <td class="active"><p>F</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
            <td class="people">
              <div class="people-des">
                <h5>Goat</h5>
              </div>
            </td>
  
            <td class="people-des">
            <h5>Muturu</h5> 
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Unhealthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
            <td class="people">
              <div class="people-des">
                <h5>Cattle</h5>
              </div>
            </td>
  
            <td class="people-des">
              <h5>Muturu</h5> 
            </td>
            <td class="active"><p>M</p></td>
  
            <td class="role">
              <p>Unhealthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
            <td class="people">
              <div class="people-des">
                <h5>Sheep</h5>
              </div>
            </td>
  
            <td class="people-des">
               <h5>Limousin Cattle</h5> 
            </td>
            <td class="active"><p>F</p></td>
  
            <td class="role">
              <p>Healthy</p>
            </td>
  
            <td class="role">
              <a href="group-C.html">
                <i class="fa-solid fa-eye"></i>
              </a>
            </td>
  
            <td class="edit scanButton"  data-image="images/qr-code.png"><i class="fa-solid fa-qrcode"></i>
             </td>
          </tr>
        </tbody>
      </table>
    </div>
    </section>
    <!-- row markup ends here -->
    <script>

$(document).ready(function() {
            $('.sub-btn').click(function() {
                $(this).next('.sub-menu').slideToggle();
                $(this).find('.dropdown').toggleClass('rotate');
            });
        });

        // Adding livestock code
const livestockForm = document.getElementById("livestock-form");
const livestockTableBody = document.getElementById("livestock-table-body");

function altrows(firstcolor, secondcolor) {
    var tableElements = document.getElementsByTagName("table");
    for (var j = 0; j < tableElements.length; j++) {
        var table = tableElements[j];
        var rows = table.getElementsByTagName("tr");
        for (var i = 0; i < rows.length; i++) { // Fix the condition here
            if (i % 2 == 0) {
                rows[i].style.backgroundColor = firstcolor;
            } else {
                rows[i].style.backgroundColor = secondcolor;
            }
        }
    }
}

function addLivestockToTable(breed, name, sex, healthStatus, age, weight) {
    // Create a new row for the table
    const newRow = document.createElement("tr");

    newRow.innerHTML = `
        <td class="people">
            <div class="people-des">
                <h5>${name}</h5>
            </div>
        </td>
        <td class="people-des">
            <h5>${breed}</h5>
        </td>
        <td class="active"><p>${sex}</p></td>
        <td class="role">
            <p style="color: red;">Not Assigned</p>
        </td>
        <td class="role">
            <button class="view-button" onclick="viewLivestockDetails('${breed}', '${name}', '${sex}', '${healthStatus}', '${age}', '${weight}')">
                <i class="fa-solid fa-eye"></i>
            </button>
        </td>
        <td class="edit scanButton"  data-image="images/qr-code.png">
            <i class="fa-solid fa-qrcode"></i>
        </td>
    `;

    // Append the new row to the table body 
    livestockTableBody.appendChild(newRow);

    altrows("#787d8d", "#fff");
}

// Function to hide the pop-up
function hidePopup() {
    alert("Livestock Added Successfully");
    formContainer.style.visibility = 'hidden';
}

livestockForm.addEventListener("submit", function (e) {
    e.preventDefault();
    hidePopup();

    // Retrieve values from the form fields
    const breedInput = document.getElementById("breed");
    const nameInput = document.getElementById("name");
    const sexInput = document.getElementById("sex");
    const ageInput = document.getElementById("age");
    const weightInput = document.getElementById("weight");
    const formcontent = document.getElementsByClassName("form-content");

    const breed = breedInput.value;
    const name = nameInput.value;
    const sex = sexInput.value;
    const age = ageInput.value;
    const weight = weightInput.value;

    // Create a JSON object with the livestock data
    const livestockData = {
        breed,
        name,
        sex,
        age,
        weight,
    };

    // Send a POST request to your backend API to add the livestock
    fetch("https://rantec-hh1l.onrender.com/livestockRoute", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(livestockData),
    })
    .then((response) => {
        if (!response.ok) {
            throw new Error(`Server returned ${response.status} ${response.statusText}`);
        }
        return response.json();
    })
    .then((data) => {
        console.log(data);
        // Assuming your API returns the added livestock data, you can add it to the table
        addLivestockToTable(data.breed, data.name, data.sex, data.age, data.weight);

        // Clear the input fields
        breedInput.value = "";
        nameInput.value = "";
        sexInput.value = "male"; // Set default value to "male"
        ageInput.value = "";
        weightInput.value = "";
    })
    .catch((error) => {
        console.error("Error:", error);
    });
});

// Function to fetch and populate livestock data on page load
function fetchAndPopulateLivestockData() {
    fetch("https://rantec-hh1l.onrender.com/livestockRoute")
        .then((response) => {
            if (!response.ok) {
                throw new Error(`Server returned ${response.status} ${response.statusText}`);
            }
            return response.json();
        })
        .then((data) => {
            // Populate the table with the fetched livestock data
            data.forEach((livestock) => {
                addLivestockToTable(
                    livestock.breed,
                    livestock.name,
                    livestock.sex,
                    livestock.healthStatus,
                    livestock.age,
                    livestock.weight
                );
            });
        })
        .catch((error) => {
            console.error("Error:", error);
        });
}

// Call the function to fetch and populate data on page load
fetchAndPopulateLivestockData();

 </script>
<!-- Load qrcode-svg library from a CDN -->
<!-- <script src="https://unpkg.com/qrcode-svg/dist/qrcode.min.js"></script> -->
<!-- Load your custom JavaScript file after the library -->
<!-- <script src="scripts/addlivestockapi.js"></script> -->
<script src="scripts/angus.js"></script>
</body>
</html>